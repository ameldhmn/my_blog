<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-03-07">

<title>my_blog - Exercices - Semaine 4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="../../site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="../../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="../../site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="../../site_libs/leaflet-binding-2.2.1/leaflet.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">my_blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ameldhmn" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Exercices - Semaine 4</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">code</div>
                <div class="quarto-category">analysis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 7, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="exercices---semaine-4" class="level2">
<h2 class="anchored" data-anchor-id="exercices---semaine-4">Exercices - Semaine 4</h2>
<section id="question-1" class="level3">
<h3 class="anchored" data-anchor-id="question-1">Question 1</h3>
<section id="installez-les-packages-devtools-httr2-jsonlite." class="level4">
<h4 class="anchored" data-anchor-id="installez-les-packages-devtools-httr2-jsonlite.">Installez les packages devtools, httr2, jsonlite.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usethis)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmltools)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(testthat)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidygeocoder)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(roxygen2)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="question-2" class="level3">
<h3 class="anchored" data-anchor-id="question-2">Question 2</h3>
<section id="dans-une-nouvelle-session-r-créer-un-nouveau-projet-de-package-intitulé-olympicsweather-en-utilisant-la-fonction-create_package-de-la-librairie-usethis.-pourquoi-nest-il-pas-nécessaire-dinstaller-explicitement-usethis" class="level4" style="text-align: justify;">
<h4 class="anchored" data-anchor-id="dans-une-nouvelle-session-r-créer-un-nouveau-projet-de-package-intitulé-olympicsweather-en-utilisant-la-fonction-create_package-de-la-librairie-usethis.-pourquoi-nest-il-pas-nécessaire-dinstaller-explicitement-usethis">Dans une nouvelle session R, créer un nouveau projet de package intitulé olympicsWeather en utilisant la fonction create_package de la librairie usethis. Pourquoi n’est-il pas nécessaire d’installer explicitement usethis ?</h4>
</section>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">create_package</span>(<span class="st">"olympicsWeather"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="question-3" class="level3">
<h3 class="anchored" data-anchor-id="question-3">Question 3</h3>
<section id="créer-un-nouveau-script-r-intitulé-get_weather_forecast-en-utilisant-la-fonction-usethisuse_r." class="level4" style="text-align: justify;">
<h4 class="anchored" data-anchor-id="créer-un-nouveau-script-r-intitulé-get_weather_forecast-en-utilisant-la-fonction-usethisuse_r.">Créer un nouveau script R intitulé get_weather_forecast en utilisant la fonction usethis::use_r().</h4>
</section>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_r</span>(<span class="st">"get_weather_forecast"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ Setting active project to '/Users/ameldahmani/Library/Mobile Documents/com~apple~CloudDocs/M1 ECAP/R avancé/my_blog'
• Edit 'R/get_weather_forecast.R'</code></pre>
</div>
</div>
</section>
<section id="question-4" class="level3">
<h3 class="anchored" data-anchor-id="question-4">Question 4</h3>
<section id="sans-implémenter-la-fonction-pour-linstant-écrivez-une-requête-dapi-en-utilisant-la-librairie-httr2-que-vous-aurez-préalablement-installé." class="level4" style="text-align: justify;">
<h4 class="anchored" data-anchor-id="sans-implémenter-la-fonction-pour-linstant-écrivez-une-requête-dapi-en-utilisant-la-librairie-httr2-que-vous-aurez-préalablement-installé.">Sans implémenter la fonction pour l’instant, écrivez une requête d’api en utilisant la librairie httr2 que vous aurez préalablement installé.</h4>
<p>• l’url de l’api open-api est la suivante:&nbsp;<a href="https://www.google.com/url?q=https://api.open-meteo.com/v1/forecast&amp;source=gmail-html&amp;ust=1708971790254000&amp;usg=AOvVaw1RR4vboZVa1vX4Vubr9VIU">https://api.open-meteo.com/v1/forecast</a><br>
• vous utiliserez les fonctions request, req_url_query, req_perform, resp_body_json pour passer la requête. Ces instructions peuvent se chaîner avec des pipes. La fonction request permet d’initialiser l’objet de request en passant l’url de l’api. La fonction req_url_query permet de passer différents paramètres à la requête, quand req_perform exécute la requête et récupère les résultats dans la session R. Enfin, la fonction resp_body_json extrait les données retournées en json du résultat de la requête. Vous pourrez utiliser la fonction tibble::as_tibble() pour convertir en tibble la table retournée.<br>
• pour la première requête, nous souhaitons obtenir la prévision météo aux coordonnées géographiques c(48.85, 2.35)<br>
•nous souhaitons obtenir les informations de températures, de températures ressenties, de probabilité de précipitation, et de quantités de précipitations. Indice, vous devrez passer le paramètre suivant (entre autres) hourly= c(“temperature_2m”, “apparent_temperature”, “precipitation_probability”, “precipitation”) à la fonction req_url_query</p>
</section>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://api.open-meteo.com/v1/forecast"</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">request</span>(url) <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_url_query</span>(<span class="at">latitude =</span> <span class="fl">48.85</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">longitude =</span> <span class="fl">2.35</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">hourly=</span> <span class="fu">c</span>(<span class="st">"temperature_2m"</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"apparent_temperature"</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"precipitation_probability"</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"precipitation"</span>),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">.multi =</span> <span class="st">"comma"</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">resp_body_json</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  tibble<span class="sc">::</span><span class="fu">as_tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 9
  latitude longitude generationtime_ms utc_offset_seconds timezone
     &lt;dbl&gt;     &lt;dbl&gt;             &lt;dbl&gt;              &lt;int&gt; &lt;chr&gt;   
1     48.8      2.36             0.193                  0 GMT     
2     48.8      2.36             0.193                  0 GMT     
3     48.8      2.36             0.193                  0 GMT     
4     48.8      2.36             0.193                  0 GMT     
5     48.8      2.36             0.193                  0 GMT     
# ℹ 4 more variables: timezone_abbreviation &lt;chr&gt;, elevation &lt;dbl&gt;,
#   hourly_units &lt;named list&gt;, hourly &lt;named list&gt;</code></pre>
</div>
</div>
</section>
<section id="question-5" class="level3">
<h3 class="anchored" data-anchor-id="question-5">Question 5</h3>
<section id="décrivez-le-résultat.-quavons-nous-obtenu-suite-à-notre-requête-quels-paramètres-souhaitons-nous-changer-si-nous-voulons-pouvoir-récupérer-les-prévisions-météo-pour-tous-les-sites-des-jos" class="level4" style="text-align: justify;">
<h4 class="anchored" data-anchor-id="décrivez-le-résultat.-quavons-nous-obtenu-suite-à-notre-requête-quels-paramètres-souhaitons-nous-changer-si-nous-voulons-pouvoir-récupérer-les-prévisions-météo-pour-tous-les-sites-des-jos">Décrivez le résultat. Qu’avons nous obtenu suite à notre requête ? Quels paramètres souhaitons nous changer si nous voulons pouvoir récupérer les prévisions météo pour tous les sites des JOs ?</h4>
</section>
<div style="text-align: justify;">
<p>Nous avons obtenu un tibble qui contient plusieurs informations météorologiques pour un endroit spécifique situé à la latitude 48.85 et la longitude 2.85.</p>
<p>Ce tibble comporte cinq lignes, chacune représentant un aspect différent des données météorologiques.</p>
<p>Il est par ailleurs composé de neuf colonnes, incluant notamment les latitudes et longitudes, les unités des mesures horaires de chaque ligne, l’abréviation du fuseau horaire, le fuseau goraire, l’élévation de l’endroit, et une colonne appelée “hourly”, qui présente les horaires et qui est particulièrement intéressante. Dans cette colonne “hourly”, chaque paramètre météorologique est représenté par une liste, reflétant son évolution dans le temps à une adresse spécifique. Ainsi, pour chaque site, nous pouvons observer comment les différents paramètres météorologiques évoluent heure par heure.</p>
<p>Cependant, pour collecter les prévisions météorologiques pour tous les sites des Jeux Olympiques, il est nécessaire d’ajuster la longitude et la latitude correspondant à chaque site. Par conséquent, nous devons créer une fonction qui recueille initialement la latitude et la longitude pour chaque site olympique. Cette fonction nous permettra d’interroger l’API météo avec les coordonnées correctes pour obtenir les données météorologiques spécifiques à chaque site. En ajustant les coordonnées, nous pourrons ainsi obtenir les prévisions météorologiques pour tous les sites des Jeux Olympiques.</p>
</div>
</section>
<section id="question-6" class="level3">
<h3 class="anchored" data-anchor-id="question-6">Question 6</h3>
<section id="lobjectif-est-donc-dimplémenter-une-fonction-get_weather_forecast-pour-récupérer-une-table-de-prévisions-météo-à-une-coordonnées-gps-donnée.-avant-dimplémenter-cette-fonction-accessible-à-lutilisateur-nous-souhaitons-implémenter-plusieurs-fonctions-internes" class="level4" style="text-align: justify;">
<h4 class="anchored" data-anchor-id="lobjectif-est-donc-dimplémenter-une-fonction-get_weather_forecast-pour-récupérer-une-table-de-prévisions-météo-à-une-coordonnées-gps-donnée.-avant-dimplémenter-cette-fonction-accessible-à-lutilisateur-nous-souhaitons-implémenter-plusieurs-fonctions-internes">L’objectif est donc d’implémenter une fonction get_weather_forecast pour récupérer une table de prévisions météo à une coordonnées GPS donnée. Avant d’implémenter cette fonction accessible à l’utilisateur, nous souhaitons implémenter plusieurs fonctions internes</h4>
</section>
</section>
<section id="question-7" class="level3">
<h3 class="anchored" data-anchor-id="question-7">Question 7</h3>
<section id="fonction-perform_request" class="level4">
<h4 class="anchored" data-anchor-id="fonction-perform_request">Fonction perform_request:</h4>
<div style="text-align: justify;">
<p>• la fonction perform request prend en entrée deux arguments: latitude et longitude<br>
• elle effectue la requête sur l’api publique ci-dessus, et retourne le contenu du body sous forme d’une tibble (exactement comme dans la question 4)</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param latitude latitude (numeric)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param longitude longitude (numeric)</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return le contenu du body sous forme d'un tibble de 5 lignes et 9 colonnes</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>perform_request <span class="ot">&lt;-</span> <span class="cf">function</span>(latitude, longitude){</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">&lt;-</span> <span class="st">"https://api.open-meteo.com/v1/forecast"</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">request</span>(url) <span class="sc">|&gt;</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req_url_query</span>(<span class="at">latitude =</span> latitude,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">longitude =</span> longitude,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">hourly=</span> <span class="fu">c</span>(<span class="st">"temperature_2m"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"apparent_temperature"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"precipitation_probability"</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"precipitation"</span>),</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.multi =</span> <span class="st">"comma"</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">req_perform</span>() <span class="sc">|&gt;</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">resp_body_json</span>() <span class="sc">|&gt;</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as_tibble</span>()</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="fu">perform_request</span>(<span class="fl">47.216671</span>, <span class="sc">-</span><span class="fl">1.55</span>)</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>resp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 9
  latitude longitude generationtime_ms utc_offset_seconds timezone
     &lt;dbl&gt;     &lt;dbl&gt;             &lt;dbl&gt;              &lt;int&gt; &lt;chr&gt;   
1     47.2     -1.55             0.258                  0 GMT     
2     47.2     -1.55             0.258                  0 GMT     
3     47.2     -1.55             0.258                  0 GMT     
4     47.2     -1.55             0.258                  0 GMT     
5     47.2     -1.55             0.258                  0 GMT     
# ℹ 4 more variables: timezone_abbreviation &lt;chr&gt;, elevation &lt;dbl&gt;,
#   hourly_units &lt;named list&gt;, hourly &lt;named list&gt;</code></pre>
</div>
</div>
<p>Notre fonction opère de manière efficace, permettant la récupération des données météorologiques de tout point en utilisant simplement ses coordonnées GPS, à savoir, la latitude et la longitude.</p>
</section>
</section>
<section id="question-8" class="level3">
<h3 class="anchored" data-anchor-id="question-8">Question 8</h3>
<section id="fonction-unnest_response" class="level4">
<h4 class="anchored" data-anchor-id="fonction-unnest_response">Fonction unnest_response:</h4>
<p>• les résultats obtenus après la requête n’étant pas bien formattés, il faut écrire une fonction pour transformer la forme de la tibble obtenue<br>
• la fonction en entrée prendre une tibble au format issu de la requête<br>
• et retournera les mêmes données au schema suivant:<br>
– date_heure: heure au tz UTC<br>
– tempature_celsius: données de température<br>
– temperature_ressentie_celsius: données de température ressentie<br>
– precipation_proba: probabilité de pluie<br>
– precipitation: precipitation en mm</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Décompacte les données de réponse des prévisions météorologiques.</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param resp Résultat de la fonction précédente, tibble 5x9</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return Un nouveau tibble comprenant 168 observations et 5 variables</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>unnest_response <span class="ot">&lt;-</span> <span class="cf">function</span>(resp){</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  hourly_donnees <span class="ot">&lt;-</span> resp<span class="sc">$</span>hourly</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(hourly_donnees) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Aucune donnée dans la colonne 'hourly'."</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  output_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"heure au tz UTC"</span> <span class="ot">=</span> <span class="fu">with_tz</span>(<span class="fu">unlist</span>(hourly_donnees[[<span class="dv">1</span>]]), <span class="at">tzone =</span> <span class="st">"UTC"</span>),</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"données de température"</span> <span class="ot">=</span> <span class="fu">unlist</span>(hourly_donnees[[<span class="dv">2</span>]]),</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"données de température ressentie"</span> <span class="ot">=</span> <span class="fu">unlist</span>(hourly_donnees[[<span class="dv">3</span>]]),</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"probabilité de pluie"</span> <span class="ot">=</span> <span class="fu">unlist</span>(hourly_donnees[[<span class="dv">4</span>]]),</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"precipitation en mm"</span> <span class="ot">=</span> <span class="fu">unlist</span>(hourly_donnees[[<span class="dv">5</span>]])</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(output_tibble)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>resp2 <span class="ot">&lt;-</span> <span class="fu">unnest_response</span>(resp)</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>resp2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 168 × 5
   `heure au tz UTC`   `données de température` données de température ressent…¹
   &lt;dttm&gt;                                 &lt;dbl&gt;                            &lt;dbl&gt;
 1 2024-03-06 23:00:00                      5.9                              3.2
 2 2024-03-06 23:00:00                      5.4                              2.5
 3 2024-03-06 23:00:00                      6.3                              2.9
 4 2024-03-06 23:00:00                      5.7                              2.6
 5 2024-03-06 23:00:00                      5.6                              2.3
 6 2024-03-06 23:00:00                      4.8                              1.4
 7 2024-03-06 23:00:00                      4.7                              0.9
 8 2024-03-06 23:00:00                      4.7                              0.9
 9 2024-03-06 23:00:00                      5.2                              1.1
10 2024-03-06 23:00:00                      7.4                              2.6
# ℹ 158 more rows
# ℹ abbreviated name: ¹​`données de température ressentie`
# ℹ 2 more variables: `probabilité de pluie` &lt;int&gt;, `precipitation en mm` &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
</section>
<section id="question-9" class="level3">
<h3 class="anchored" data-anchor-id="question-9">Question 9</h3>
<section id="tests-unitaires-pour-la-fonction-unnest_response" class="level4">
<h4 class="anchored" data-anchor-id="tests-unitaires-pour-la-fonction-unnest_response">Tests unitaires pour la fonction unnest_response:</h4>
<p>• créez un script de tests en utilisant la fonction usethis::use_test(“unnest_response”)<br>
• dans ce script, créez un jeu de données minimal pour tester le comportement de la fonction<br>
• testez la fonction, en proposant plusieurs tests unitaires. Exemple de tests unitaires:<br>
– testez que la fonction renvoie le bon nombre de lignes<br>
– testez que les valeurs de la colonne temperature correspondent aux valeur proposées en entrée<br>
– testez le nom des colonnes en sortie<br>
– testez le nombre de colonnes en sortie</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_test</span>(<span class="st">"unnest_response"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>testthat<span class="sc">::</span><span class="fu">test_dir</span>(<span class="st">'tests/testthat/'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="création-du-jeu-de-données-minimal-pour-tester-le-comportement-de-la-fonction" class="level5">
<h5 class="anchored" data-anchor-id="création-du-jeu-de-données-minimal-pour-tester-le-comportement-de-la-fonction">création du jeu de données minimal pour tester le comportement de la fonction</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>test_resp <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">hourly =</span> <span class="fu">list</span>(</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">heure =</span> <span class="fu">ymd_hms</span>(<span class="st">"2024-03-05 08:00:00"</span>, <span class="at">tz =</span> <span class="st">"UTC"</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">temperature =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">14</span>),</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">temperature_ressentie =</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">12</span>),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">probabilite_pluie =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>),</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">precipitation_mm =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="dv">1</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="test-que-la-fonction-renvoie-le-bon-nombre-de-lignes" class="level5">
<h5 class="anchored" data-anchor-id="test-que-la-fonction-renvoie-le-bon-nombre-de-lignes">test que la fonction renvoie le bon nombre de lignes</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">"La fonction renvoie le bon nombre de lignes"</span>, {</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  resp <span class="ot">&lt;-</span> <span class="fu">unnest_response</span>(test_resp)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">nrow</span>(resp), <span class="dv">3</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Test passed 🥇</code></pre>
</div>
</div>
</section>
<section id="test-que-les-valeurs-de-la-colonne-temperature-correspondent-aux-valeur-proposées-en-entrée" class="level5">
<h5 class="anchored" data-anchor-id="test-que-les-valeurs-de-la-colonne-temperature-correspondent-aux-valeur-proposées-en-entrée">test que les valeurs de la colonne temperature correspondent aux valeur proposées en entrée</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">"Les valeurs de la colonne temperature correspondent aux valeurs proposées en entrée"</span>, {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  resp <span class="ot">&lt;-</span> <span class="fu">unnest_response</span>(test_resp)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(resp<span class="sc">$</span><span class="st">`</span><span class="at">données de température</span><span class="st">`</span>, <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">14</span>))</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Test passed 😀</code></pre>
</div>
</div>
</section>
<section id="test-le-nom-des-colonnes-en-sortie" class="level5">
<h5 class="anchored" data-anchor-id="test-le-nom-des-colonnes-en-sortie">test le nom des colonnes en sortie</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">"Le nom des colonnes en sortie est correct"</span>, {</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  resp <span class="ot">&lt;-</span> <span class="fu">unnest_response</span>(test_resp)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_named</span>(resp, <span class="fu">c</span>(<span class="st">"heure au tz UTC"</span>, <span class="st">"données de température"</span>, <span class="st">"données de température ressentie"</span>, <span class="st">"probabilité de pluie"</span>, <span class="st">"precipitation en mm"</span>))</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Test passed 🌈</code></pre>
</div>
</div>
</section>
<section id="test-le-nombre-de-colonnes-en-sortie" class="level5">
<h5 class="anchored" data-anchor-id="test-le-nombre-de-colonnes-en-sortie">test le nombre de colonnes en sortie</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">"Le nombre de colonnes en sortie est correct"</span>, {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  resp <span class="ot">&lt;-</span> <span class="fu">unnest_response</span>(test_resp)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">ncol</span>(resp), <span class="dv">5</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Test passed 🌈</code></pre>
</div>
</div>
<p>La fonction “unnest_response” réussit tous les tests.</p>
</section>
</section>
</section>
<section id="question-10" class="level3">
<h3 class="anchored" data-anchor-id="question-10">Question 10</h3>
<section id="lors-de-la-seance-1-nous-avons-developpe-un-outil-permettant-de-trouver-les-coordonnees-gps-a-partir-dun-nom-dadresse-en-utilisant-le-package-tidygeocoder-et-la-fonction-reverse_geocode.-nous-souhaitons-que-lutilisateur-puisse-obtenir-des-previsions-meteos-a-partir-de" class="level4" style="text-align: justify;">
<h4 class="anchored" data-anchor-id="lors-de-la-seance-1-nous-avons-developpe-un-outil-permettant-de-trouver-les-coordonnees-gps-a-partir-dun-nom-dadresse-en-utilisant-le-package-tidygeocoder-et-la-fonction-reverse_geocode.-nous-souhaitons-que-lutilisateur-puisse-obtenir-des-previsions-meteos-a-partir-de">Lors de la séance 1, nous avons développé un outil permettant de trouver les coordonnées GPS à partir d’un nom d’adresse (en utilisant le package tidygeocoder et la fonction reverse_geocode). Nous souhaitons que l’utilisateur puisse obtenir des prévisions météos à partir de:</h4>
</section>
<p>• coordonnées GPS, i.e un vecteur numérique de taille 2<br>
</p>
<p>• un nom de site olympique ou une adresse. A partir du code de la séance 1, définissez une fonction address_to_gps convertissant une adresse en coordonnées gps sous la forme d’un vecteur numérique de taille 2.</p>
<p>Définir une fonction get_forecast générique, et deux implémentations get_forecast.character et get_forecast.numeric.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Convertit une adresse en coordonnées GPS.</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param adresse Adresse à géocoder</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return Coordonnées GPS obtenues à partir de l'adresse</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>address_to_gps <span class="ot">&lt;-</span> <span class="cf">function</span>(adresse) {</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  df_adresse <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"nom"</span> <span class="ot">=</span> <span class="fu">character</span>(), <span class="at">addr =</span> <span class="fu">character</span>(), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  df_adresse <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df_adresse, <span class="fu">data.frame</span>(<span class="at">addr =</span> adresse), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  resultat_geocodage <span class="ot">&lt;-</span> df_adresse <span class="sc">|&gt;</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geocode</span>(addr, <span class="at">method =</span> <span class="st">'arcgis'</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  df_adresse <span class="ot">&lt;-</span> resultat_geocodage</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df_adresse)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(df_adresse)</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>resultat10 <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(<span class="fu">address_to_gps</span>(<span class="st">"Bâtiment Erdre, Chem. de la Censive du Tertre, 44300 Nantes"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Passing 1 address to the ArcGIS single address geocoder</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Query completed in: 0.6 seconds</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>resultat10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  addr                                                          lat  long
  &lt;chr&gt;                                                       &lt;dbl&gt; &lt;dbl&gt;
1 Bâtiment Erdre, Chem. de la Censive du Tertre, 44300 Nantes  47.2 -1.55</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>carte <span class="ot">&lt;-</span> <span class="fu">leaflet</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">lng =</span> resultat10<span class="sc">$</span>long, <span class="at">lat =</span> resultat10<span class="sc">$</span>lat, <span class="at">popup =</span> <span class="st">"IAE Nantes"</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>carte</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-444b637dcf51b4c00062" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-444b637dcf51b4c00062">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addMarkers","args":[47.243139604933,-1.554257933235,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"IAE Nantes",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[47.243139604933,47.243139604933],"lng":[-1.554257933235,-1.554257933235]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="fonction-générique-pour-obtenir-les-prévisions-météo" class="level5">
<h5 class="anchored" data-anchor-id="fonction-générique-pour-obtenir-les-prévisions-météo">Fonction générique pour obtenir les prévisions météo</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>get_forecast <span class="ot">&lt;-</span> <span class="cf">function</span>(location, ...) {</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">UseMethod</span>(<span class="st">"get_forecast"</span>, location)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="implémentation-pour-les-caractères" class="level5">
<h5 class="anchored" data-anchor-id="implémentation-pour-les-caractères">Implémentation pour les caractères</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>get_forecast.character <span class="ot">&lt;-</span> <span class="cf">function</span>(location, ...) {</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  coords <span class="ot">&lt;-</span> <span class="fu">address_to_gps</span>(location)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">perform_request</span>(coords[<span class="dv">2</span>], coords[<span class="dv">1</span>], ...))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="implémentation-pour-les-vecteurs-numériques-coordonnées-gps-par-exemple" class="level5">
<h5 class="anchored" data-anchor-id="implémentation-pour-les-vecteurs-numériques-coordonnées-gps-par-exemple">Implémentation pour les vecteurs numériques (coordonnées GPS par exemple)</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>get_forecast.numeric <span class="ot">&lt;-</span> <span class="cf">function</span>(location, ...) {</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">perform_request</span>(location[<span class="dv">2</span>], location[<span class="dv">1</span>], ...))</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="text-align: justify;">
<p>Pour valider l’exactitude des coordonnées de l’adresse renseignée, il convenait d’utiliser la fonction pour récupérer les coordonnées GPS associées à cette adresse. Ensuite, de visualier la cartographique qui affiche ces coordonnées sur une carte géographique. Cette visualisation a permis de vérifier visuellement si les coordonnées récupérées correspondent à l’emplacement attendu sur la carte.</p>
</div>
</section>
</section>
<section id="question-11" class="level3">
<h3 class="anchored" data-anchor-id="question-11">Question 11</h3>
<section id="implementez-une-fonction-interne-get_gps_coordinate-renvoyant-des-coordonnees-xy-pour-une-adresse-en-utilisant-les-fonctions-de-la-question-10-ou-de-la-semaine-1." class="level4">
<h4 class="anchored" data-anchor-id="implementez-une-fonction-interne-get_gps_coordinate-renvoyant-des-coordonnees-xy-pour-une-adresse-en-utilisant-les-fonctions-de-la-question-10-ou-de-la-semaine-1.">Implémentez une fonction interne get_gps_coordinate renvoyant des coordonnées x,y pour une adresse en utilisant les fonctions de la question 10 (ou de la semaine 1).</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Obtient les coordonnées GPS à partir d'une adresse.</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param adresse Adresse à géocoder</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return Coordonnées GPS obtenues à partir de l'adresse</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>get_gps_coordinate <span class="ot">&lt;-</span> <span class="cf">function</span>(adresse) {</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  resultat_geocodage <span class="ot">&lt;-</span> <span class="fu">address_to_gps</span>(adresse)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  coordonnees <span class="ot">&lt;-</span> <span class="fu">c</span>(resultat_geocodage<span class="sc">$</span>lat, resultat_geocodage<span class="sc">$</span>long)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(coordonnees)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(coordonnees)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="fu">get_gps_coordinate</span>(<span class="st">"Bâtiment Erdre, Chem. de la Censive du Tertre, 44300 Nantes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Passing 1 address to the ArcGIS single address geocoder</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Query completed in: 0.1 seconds</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 47.243140 -1.554258</code></pre>
</div>
</div>
<p>Notre fonction renvoie avec précision les coordonnées du lieu demandé.</p>
</section>
</section>
<section id="question-12" class="level3">
<h3 class="anchored" data-anchor-id="question-12">Question 12</h3>
<section id="implementez-la-fonction-get_forecast.numeric.-cette-fonction-prend-en-entree-un-argument-xy-contenant-un-vecteur-numerique-de-coordonnees-xy-latitude-longitude-de-taille-2.-si-cette-condition-nest-pas-verifiee-alors-la-fonction-devra-declarer-une-erreur.-la-fonction-appelera-les-deux-fonctions-perform_request-et-unnest_response-avant-de-retourner-la-tibble-de-resultat." class="level4" style="text-align: justify;">
<h4 class="anchored" data-anchor-id="implementez-la-fonction-get_forecast.numeric.-cette-fonction-prend-en-entree-un-argument-xy-contenant-un-vecteur-numerique-de-coordonnees-xy-latitude-longitude-de-taille-2.-si-cette-condition-nest-pas-verifiee-alors-la-fonction-devra-declarer-une-erreur.-la-fonction-appelera-les-deux-fonctions-perform_request-et-unnest_response-avant-de-retourner-la-tibble-de-resultat.">Implémentez la fonction get_forecast.numeric. Cette fonction prend en entrée un argument xy, contenant un vecteur numérique de coordonnées x,y (latitude, longitude) de taille 2. Si cette condition n’est pas vérifiée, alors la fonction devra déclarer une erreur. La fonction appelera les deux fonctions perform_request et unnest_response avant de retourner la tibble de résultat.</h4>
</section>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Obtient les prévisions météorologiques à partir de coordonnées GPS.</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param xy Vecteur numérique avec x les latitudes et y les longitudes</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return Un tibble 168x5</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>get_forecast.numeric <span class="ot">&lt;-</span> <span class="cf">function</span>(xy, ...) {</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(xy) <span class="sc">||</span> <span class="fu">length</span>(xy) <span class="sc">!=</span> <span class="dv">2</span>) {</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"Erreur ! L'argument xy doit être un vecteur numérique de taille 2 !"</span>)</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  response_table <span class="ot">&lt;-</span> <span class="fu">perform_request</span>(xy[<span class="dv">2</span>], xy[<span class="dv">1</span>], ...)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  unnested_table <span class="ot">&lt;-</span> <span class="fu">unnest_response</span>(response_table)</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(unnested_table)</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>xy <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">47.243140</span>, <span class="sc">-</span><span class="fl">1.554258</span>)</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>resultat12 <span class="ot">&lt;-</span> <span class="fu">get_forecast.numeric</span>(xy)</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>resultat12</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 168 × 5
   `heure au tz UTC`   `données de température` données de température ressent…¹
   &lt;dttm&gt;                                 &lt;dbl&gt;                            &lt;dbl&gt;
 1 2024-03-06 23:00:00                     28.3                             34.2
 2 2024-03-06 23:00:00                     28.2                             34.3
 3 2024-03-06 23:00:00                     28.2                             34.4
 4 2024-03-06 23:00:00                     28.1                             34.5
 5 2024-03-06 23:00:00                     28.1                             34.7
 6 2024-03-06 23:00:00                     28                               34.3
 7 2024-03-06 23:00:00                     28.1                             34.1
 8 2024-03-06 23:00:00                     28                               34.4
 9 2024-03-06 23:00:00                     28                               35.2
10 2024-03-06 23:00:00                     28                               35  
# ℹ 158 more rows
# ℹ abbreviated name: ¹​`données de température ressentie`
# ℹ 2 more variables: `probabilité de pluie` &lt;int&gt;, `precipitation en mm` &lt;dbl&gt;</code></pre>
</div>
</div>
<div style="text-align: justify;">
<p>Notre fonction est efficace puisqu’elle signale correctement les erreurs lorsque le vecteur n’est ni numérique ni de taille 2, et récupère avec succès les données météorologiques pour les coordonnées fournies lorsqu’elles sont un vecteur numérique de taille 2.</p>
</div>
</section>
<section id="question-13" class="level3">
<h3 class="anchored" data-anchor-id="question-13">Question 13</h3>
<section id="implementez-la-fonction-get_forecast.character.-cette-fonction-prend-en-entree-un-argument-address-de-type-character-de-taille-1.-si-cette-condition-nest-pas-verifiee-alors-la-fonction-devra-declarer-une-erreur.-la-fonction-appelera-les-deux-fonctions-address_to_gps-puis-la-fonction-get_forecast-en-passant-le-resultat-de-lappel-a-address_to_gps." class="level4" style="text-align: justify;">
<h4 class="anchored" data-anchor-id="implementez-la-fonction-get_forecast.character.-cette-fonction-prend-en-entree-un-argument-address-de-type-character-de-taille-1.-si-cette-condition-nest-pas-verifiee-alors-la-fonction-devra-declarer-une-erreur.-la-fonction-appelera-les-deux-fonctions-address_to_gps-puis-la-fonction-get_forecast-en-passant-le-resultat-de-lappel-a-address_to_gps.">Implémentez la fonction get_forecast.character. Cette fonction prend en entrée un argument address, de type character, de taille 1. Si cette condition n’est pas vérifiée, alors la fonction devra déclarer une erreur. La fonction appelera les deux fonctions address_to_gps puis la fonction get_forecast en passant le résultat de l’appel à address_to_gps.</h4>
</section>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Prévisions météorologiques à partir d'une adresse.</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param adresse Adresse à géocoder</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return Les prévisions météorologiques obtenues</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>forecast.character <span class="ot">&lt;-</span> <span class="cf">function</span>(adresse) {</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.character</span>(adresse) <span class="sc">||</span> <span class="fu">length</span>(adresse) <span class="sc">!=</span> <span class="dv">1</span>) {</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"L'argument address doit être de type character et de taille 1."</span>)</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="co">#' Obtient les prévisions météorologiques à partir d'une adresse.</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param adresse Adresse à géocoder</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return Les prévisions météorologiques obtenues</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>get_forecast.character <span class="ot">&lt;-</span> <span class="cf">function</span>(adresse) {</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast.character</span>(adresse)</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>  coordinates <span class="ot">&lt;-</span> <span class="fu">get_gps_coordinate</span>(adresse)</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>  resultat_previsions <span class="ot">&lt;-</span> <span class="fu">perform_request</span>(<span class="at">latitude =</span> coordinates[<span class="dv">1</span>], <span class="at">longitude =</span> coordinates[<span class="dv">2</span>])</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>  resultat_traitement <span class="ot">&lt;-</span> <span class="fu">unnest_response</span>(resultat_previsions)</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(resultat_traitement)</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a><span class="fu">get_forecast.character</span>(<span class="st">"46, rue Proudhon, 93210, Saint-Denis, France"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Passing 1 address to the ArcGIS single address geocoder</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Query completed in: 0.9 seconds</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 168 × 5
   `heure au tz UTC`   `données de température` données de température ressent…¹
   &lt;dttm&gt;                                 &lt;dbl&gt;                            &lt;dbl&gt;
 1 2024-03-06 23:00:00                      4.7                              2.7
 2 2024-03-06 23:00:00                      4.1                              1.7
 3 2024-03-06 23:00:00                      3.7                              1.5
 4 2024-03-06 23:00:00                      3                                0.7
 5 2024-03-06 23:00:00                      2.7                              0.4
 6 2024-03-06 23:00:00                      2.5                             -0.1
 7 2024-03-06 23:00:00                      2.4                              0  
 8 2024-03-06 23:00:00                      2.6                              0.1
 9 2024-03-06 23:00:00                      3.7                              1.4
10 2024-03-06 23:00:00                      6.6                              4.2
# ℹ 158 more rows
# ℹ abbreviated name: ¹​`données de température ressentie`
# ℹ 2 more variables: `probabilité de pluie` &lt;int&gt;, `precipitation en mm` &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_forecast.numeric</span>(<span class="fu">c</span>(<span class="fl">47.243140</span>, <span class="sc">-</span><span class="fl">1.554258</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 168 × 5
   `heure au tz UTC`   `données de température` données de température ressent…¹
   &lt;dttm&gt;                                 &lt;dbl&gt;                            &lt;dbl&gt;
 1 2024-03-06 23:00:00                     28.3                             34.2
 2 2024-03-06 23:00:00                     28.2                             34.3
 3 2024-03-06 23:00:00                     28.2                             34.4
 4 2024-03-06 23:00:00                     28.1                             34.5
 5 2024-03-06 23:00:00                     28.1                             34.7
 6 2024-03-06 23:00:00                     28                               34.3
 7 2024-03-06 23:00:00                     28.1                             34.1
 8 2024-03-06 23:00:00                     28                               34.4
 9 2024-03-06 23:00:00                     28                               35.2
10 2024-03-06 23:00:00                     28                               35  
# ℹ 158 more rows
# ℹ abbreviated name: ¹​`données de température ressentie`
# ℹ 2 more variables: `probabilité de pluie` &lt;int&gt;, `precipitation en mm` &lt;dbl&gt;</code></pre>
</div>
</div>
<p>La fonction opère correctement.</p>
</section>
<section id="question-14" class="level3">
<h3 class="anchored" data-anchor-id="question-14">Question 14</h3>
<section id="documentez-la-fonction-get_forecast-en-utilisant-les-balises-roxygen-appropriees." class="level4">
<h4 class="anchored" data-anchor-id="documentez-la-fonction-get_forecast-en-utilisant-les-balises-roxygen-appropriees.">Documentez la fonction get_forecast en utilisant les balises Roxygen appropriées.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' get_forecast</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' Cette fonction générique permet d'obtenir des prévisions météorologiques en fonction d'une localisation.</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' Elle a deux implémentations spécifiques :</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co">#'   - get_forecast.character : pour obtenir des prévisions à partir d'un nom de site olympique ou d'une adresse.</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co">#'   - get_forecast.numeric : pour obtenir des prévisions à partir des coordonnées GPS.</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param location Emplacement pour obtenir les prévisions (Adresse, nom de site olympique ou coordonnées GPS).</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co">#'   - Pour get_forecast.character : un caractère de taille 1.</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="co">#'   - Pour get_forecast.numeric : un vecteur numérique de taille 2 (latitude, longitude).</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return Un tibble contenant les prévisions météorologiques.</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="co">#' @examples</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a><span class="co">#' Exemples d'utilisation :</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a><span class="co">#' \dontrun{</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a><span class="co">#'   # Exemples d'utilisation</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a><span class="co">#'   get_forecast("Nantes")</span></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a><span class="co">#'   get_forecast(c(48.85, 2.35))</span></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a><span class="co">#' }</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a><span class="co">#' @seealso</span></span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a><span class="co">#' \code{\link{get_forecast.character}}, \code{\link{get_forecast.numeric}},</span></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a><span class="co">#' \code{\link{perform_request}}, \code{\link{unnest_response}}</span></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>get_forecast <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.numeric</span>(x)) {</span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_forecast.numeric</span>(x)</span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">is.character</span>(x)) {</span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_forecast.character</span>(x)</span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"L'argument doit être de type numeric (coordonnées) ou character (adresse)."</span>)</span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a>resultat14 <span class="ot">&lt;-</span><span class="fu">get_forecast</span>(<span class="st">"District de Huairou, Chine, 101406"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Passing 1 address to the ArcGIS single address geocoder</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Query completed in: 0.1 seconds</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(resultat14)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 168 × 5
   `heure au tz UTC`   `données de température` données de température ressent…¹
   &lt;dttm&gt;                                 &lt;dbl&gt;                            &lt;dbl&gt;
 1 2024-03-06 23:00:00                      1.4                             -2.2
 2 2024-03-06 23:00:00                      3.3                             -0.3
 3 2024-03-06 23:00:00                      5.4                              1.4
 4 2024-03-06 23:00:00                      7.2                              3.4
 5 2024-03-06 23:00:00                      9.1                              6.2
 6 2024-03-06 23:00:00                     10.9                              7.9
 7 2024-03-06 23:00:00                     10.9                              7.4
 8 2024-03-06 23:00:00                     11.2                              6  
 9 2024-03-06 23:00:00                     10.9                              5.5
10 2024-03-06 23:00:00                     10.5                              5.5
# ℹ 158 more rows
# ℹ abbreviated name: ¹​`données de température ressentie`
# ℹ 2 more variables: `probabilité de pluie` &lt;int&gt;, `precipitation en mm` &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>resultat14bis <span class="ot">&lt;-</span><span class="fu">get_forecast</span>(<span class="fu">c</span>(<span class="fl">47.243140</span>, <span class="sc">-</span><span class="fl">1.554258</span>))</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(resultat14bis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 168 × 5
   `heure au tz UTC`   `données de température` données de température ressent…¹
   &lt;dttm&gt;                                 &lt;dbl&gt;                            &lt;dbl&gt;
 1 2024-03-06 23:00:00                     28.3                             34.2
 2 2024-03-06 23:00:00                     28.2                             34.3
 3 2024-03-06 23:00:00                     28.2                             34.4
 4 2024-03-06 23:00:00                     28.1                             34.5
 5 2024-03-06 23:00:00                     28.1                             34.7
 6 2024-03-06 23:00:00                     28                               34.3
 7 2024-03-06 23:00:00                     28.1                             34.1
 8 2024-03-06 23:00:00                     28                               34.4
 9 2024-03-06 23:00:00                     28                               35.2
10 2024-03-06 23:00:00                     28                               35  
# ℹ 158 more rows
# ℹ abbreviated name: ¹​`données de température ressentie`
# ℹ 2 more variables: `probabilité de pluie` &lt;int&gt;, `precipitation en mm` &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
</section>
<section id="question-15" class="level3">
<h3 class="anchored" data-anchor-id="question-15">Question 15</h3>
<section id="mettez-a-jour-le-fichier-description.-assurez-vous-davoir-un-namespace-a-jour-en-utilisant-devtoolsdocument." class="level4">
<h4 class="anchored" data-anchor-id="mettez-a-jour-le-fichier-description.-assurez-vous-davoir-un-namespace-a-jour-en-utilisant-devtoolsdocument.">Mettez à jour le fichier DESCRIPTION. Assurez-vous d’avoir un NAMESPACE à jour en utilisant devtools::document.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(olympicsWeather)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'olympicsWeather'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked _by_ '.GlobalEnv':

    forecast.character, get_forecast, get_forecast.character,
    get_forecast.numeric, get_gps_coordinate, perform_request,
    unnest_response</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">"get_forecast"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="question-bonus" class="level3">
<h3 class="anchored" data-anchor-id="question-bonus">Question bonus</h3>
<section id="quelle-strategie-employeriez-vous-pour-fournir-une-sortie-visuelle-aux-utilisateurs-essayez-de-proposer-une-fonction-dans-le-package-pour-rendre-visuelle-la-sortie-du-package." class="level4">
<h4 class="anchored" data-anchor-id="quelle-strategie-employeriez-vous-pour-fournir-une-sortie-visuelle-aux-utilisateurs-essayez-de-proposer-une-fonction-dans-le-package-pour-rendre-visuelle-la-sortie-du-package.">Quelle stratégie employeriez-vous pour fournir une sortie visuelle aux utilisateurs ? Essayez de proposer une fonction dans le package pour rendre visuelle la sortie du package.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Visualise les emplacements des prévisions météorologiques sur une carte Leaflet</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param forecast_locations Un data frame contenant les emplacements des prévisions météorologiques avec au moins deux colonnes : long (longitude) et lat (latitude).</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return Une carte Leaflet avec des marqueurs pour les emplacements des prévisions météorologiques.</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>visualiser_carte <span class="ot">&lt;-</span> <span class="cf">function</span>(forecast_locations) {</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(leaflet)</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>  ma_carte <span class="ot">&lt;-</span> <span class="fu">leaflet</span>() <span class="sc">%&gt;%</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">addMarkers</span>(<span class="at">lng =</span> forecast_locations<span class="sc">$</span>long, <span class="at">lat =</span> forecast_locations<span class="sc">$</span>lat)</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ma_carte)</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a><span class="co">#exemple d'utilisation </span></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>exemple1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">long =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.1278</span>, <span class="sc">-</span><span class="fl">73.935242</span>, <span class="fl">151.2093</span>), </span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">lat =</span> <span class="fu">c</span>(<span class="fl">51.5074</span>, <span class="fl">40.730610</span>, <span class="sc">-</span><span class="fl">33.8688</span>)  </span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>ma_carte <span class="ot">&lt;-</span> <span class="fu">visualiser_carte</span>(exemple1)</span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>ma_carte</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-47aa4f9abc71c38de796" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-47aa4f9abc71c38de796">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addMarkers","args":[[51.5074,40.73061,-33.8688],[-0.1278,-73.935242,151.2093],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-33.8688,51.5074],"lng":[-73.935242,151.2093]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Visualise les prévisions météorologiques</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param forecast_data Un data frame contenant les données de prévisions météorologiques avec au moins deux colonnes : date et température.</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return Un objet ggplot représentant les prévisions météorologiques.</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>visualiser_previsions <span class="ot">&lt;-</span> <span class="cf">function</span>(forecast_data) {</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">require</span>(ggplot2)</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> forecast_data, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> temperature)) <span class="sc">+</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Prévision de la température"</span>, <span class="at">x =</span> <span class="st">"Date"</span>, <span class="at">y =</span> <span class="st">"Température (°C)"</span>)</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a><span class="co">#exemple d'utilisation </span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>exemple2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">date =</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">"2022-01-01"</span>), <span class="at">by =</span> <span class="st">"day"</span>, <span class="at">length.out =</span> <span class="dv">7</span>), </span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">temperature =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="dv">23</span>, <span class="dv">22</span>) </span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>mon_graph <span class="ot">&lt;-</span> <span class="fu">visualiser_previsions</span>(exemple2)</span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mon_graph)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Exercice4_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>